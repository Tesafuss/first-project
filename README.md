# Работа с GIT

---

## Что такое Git


Система контроля версий, которая помогает отслеживать изменения в коде и работать в команде без страха все сломать.

### Базовые понятия

- **Репозиторий** — папка проекта, за которой следит Git.
- **Коммит** — сохранение (снимок) состояния файлов.
- **Ветка** — отдельная линия разработки.
- **Удалённый репозиторий** — копия проекта на GitHub / GitLab / etc.

---

## Установка GIT

1) Перейти на сайт [git-scm](https://git-scm.com/install/windows) и скачать одну из двух версий из категории Standalone Installer

2) Запустить программу установки. Обычно Git устанавливается а директории C:\Program Files\Git

3) На шаге Select Components убедиться, что для пункта Git Bash Here установлена галочка. Если галочки нет - установить её

4) Далее установщик предложит много опций. Их можно пропустить и просто нажимать Next

5) После окончания установки нажать Finish

---

## Запуск Git

Запустить Git можно через файл bash.exe, который находится в директории с утсановленым Git. Или через контекстное меню - правая кнопка мыши и выбрать пункт Open Git Bash here.

---

### Настройка пользователя для Git

Все глобальные настройки Git хранит в файле .gitconfig в домашней директории. Чтобы было понятно кто и какие изменения вносил в проект требуется указать имя пользователя и адрес почты.

```bash
$ git config --global user.name "User Namovich"    #имя или ник нужно написать латиницей и в кавычках

$ git config --global user.email username@yandex.ru    # здесь нужно указать свой настоящий email
```

Проверить настройки можно командой 

``` bash 
git config --list 
```

---

## Инициализация репозитория

Чтобы Git начал отслеживать изменения в проекте, папку с файлами этого проекта нужно сделать Git-репозиторием. Для этого следует переместиться в неё и ввести команду git init.

```bash
git init
```

После этого Git начинает следить за папкой.


Чтобы "разгитить" папку нужно удалить скрытую подпапку .git. Для этого требуется переместиться в папку с репозиторием и выполнить команду

```bash
rm -rf /git # удаление подпапки .git
```

### Генерация SSH-ключа

Первоначально следуюет убедиться что SSH-ключа еще нет. По умолчанию директория с SSH-ключами находится в домашней директории.

```bash
cd ~ # переход в домашнюю директорию

ls -la .ssh/ # вывести список созданных ключей
```
Если папка пустая или её нет, всё в порядке.

Если есть файлы с похожими названиями, SSH-ключи уже создавались:
- id_dsa.pub;
- id_ecdsa.pub;
- id_ed25519.pub;
- id_rsa.pub.

Если мы не создавали эти файлы, следует удалить их все.

Для генерации SSH-пары можно использовать программу ssh-keygen.
```bash
$ ssh-keygen -t ed25519 -C "электронная почта, к которой привязан аккаунт на GitHub"
```

Следует указать место хранения ключей. Простой вариант — сделать домашний каталог пользователя путём по умолчанию. Для этого требуется нажать Enter на сообщение вида:
```bash
> Enter a file in which to save the key (C:\Users\<имя_пользователя>\.ssh\):[Press enter]
```

Программа запросить кодовую фразу для доступа к SSH-ключу. Можно оставить это поле пустым. и дважды нажать Enter на следующие сообщения
```bash
> Enter passphrase (empty for no passphrase): [Type a passphrase]
> Enter same passphrase again: [Type passphrase again] 
```

### Синхронизация локального и удаленного репозиториев

Для привязки SSH-ключа к своему GitHub следует скопировать ключ в буфер обмена
```bash
clip < ~/.ssh/id_ed25519.pub
``` 
1) Перейти на GitHub и выбрать пункт Settings в меню аккаунта
2) В меню слева нажать пункт SSH and GPG keys
3) В открывшейся вкладке выбрать New SSH key
4) В поле Title написать название ключа
5) В поле Key type должно быть Authentication Key
6) В поле Key скопировать ключ из буфера обмена
7) Нажать кнопку Add SSH key

После этих действий можно проверить правильность ключа с помощью команды
```bash
ssh -T git@github.com 
```

Может возникнуть ошибка вида
```bash
ssh: connect to host github.com port 22: Connection timed out
```

Для её исправления в папке со сгенерированными ключами требуется создать файл config без расширения и сохранить в нем
```bash
Host github.com
  HostName ssh.github.com
  User git
  Port 443
  PreferredAuthentications publickey
  IdentityFile C:\Users\<Имя_пользователя>\.ssh\id_ed25519
```

---

## Работа с репозиторием

1) Проверка текущего состояния репозитория:
```bash
git status
```

2) Добавить файлы к коммиту
```bash
git add . # Добавить все файлы

git add <файл> # Добавить конкретный файл
```

3) Создать коммит
```bash
git commit -m "сообщение"
```

4) Отправить изменения на удаленный репозиторий
```bash
git push -u origin main # Если команда приведёт к ошибке, попробуйте 
                          # заменить main на master. 
```